# 处理样式css/less/scss

### 什么是loader

webpack在进行打包的时候，对所有引入的资源文件，都当作模块来处理
但是webpack自身只支持对JS文件处理（新版本还支持JSON文件处理）
所以当webpack自身无法处理某种类型的文件时，通过配置特定的`loader`，赋予webpack来处理该类型文件的能力

### 处理css资源

安装两个loader，分别是`css-loader`与`style-loader`

- `css-loader`  解析CSS文件，包括解析@import等CSS自身的语法。它的作用也仅仅是解析CSS文件，它会把CSS文件解析后，以字符串的形式打包到JS文件中。不过，此时的CSS样式并不会生效，需要把CSS插入到html里才会生效
- `style-loader` 把JS里的样式代码插入到html文件里。它的原理很简单，就是通过JS动态生成style标签插入到html文件的head标签里

```sh
npm i css-loader style-loader -D
```

修改main.js

```js
import './hello.css'
```

新建hello.css

```css
.hello {
    color: blue;
}
```

修改html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="../dist/bundle.js"></script>
    <div class="hello">hello webpack</div>
  </body>
</html>
```

webpack.config.js里配置loader

```js
 module: {
    // 配置loader
    rules: [
      {
        // 值是一个正则表达式，表示当文件名后缀是.css的时候，使用use项里的loader
        test: /\.css$/, 
        // 值是一个数组，每一项是一个loader。loader的执行顺序是从后向前执行，先执行css-loader，然后把css-loader执行的结果交给style-loader执行
        use: ["style-loader", "css-loader"] 
      }
    ]
  }
```

### 使用less

安装`less`与`less-loader`

- `less-loader`: 负责将less文件编译成css文件
- `less`：`less-loader` 依赖`less`进行编译

```sh
npm i less less-loader -D
```

webpack.config.js里配置loader

```js
 module: {
    // 配置loader
    rules: [
      {
        test: /\.less$/, //值是一个正则表达式，表示当文件名后缀是.less的时候，使用use项里的loader
        use: ["style-loader", "css-loader", "less-loader"] // 值是一个数组，每一项是一个loader。loader的执行顺序是从后向前执行，先执行less-loader
      }
    ]
  }
```

### 使用scss

安装`sass`与`sass-loader`

- `sass-loader`: 负责将sass文件编译成css文件
- `sass`：`sass-loader` 依赖`sass`进行编译

```sh
npm i sass sass-loader -D
```

webpack.config.js里配置loader

```js
 module: {
    // 配置loader
    rules: [
      {
        test: /\.s[ac]ss$/, //值是一个正则表达式，表示当文件名后缀是.sass或.scss的时候，使用use项里的loader
        use: ["style-loader", "css-loader", "sass-loader"] // 值是一个数组，每一项是一个loader。loader的执行顺序是从后向前执行，先执行sass-loader
      }
    ]
  }
```

### 使用styl

安装`stylus-loader`

- `stylus-loader`: 负责styl文件编译成css文件

```sh
npm i stylus-loader -D
```

```js
module: {
    // 配置loader
    rules: [
      {
        test: /\.styl$/, //值是一个正则表达式，表示当文件名后缀是.styl的时候，使用use项里的loader
        use: ["style-loader", "css-loader", "stylus-loader"] // 值是一个数组，每一项是一个loader。loader的执行顺序是从后向前执行，先执行stylus-loader
      }
   ]
}
```

